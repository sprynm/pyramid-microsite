@use "sass:map";
@use "theme" as *;
@use "base-utils" as *;
/* FEATURE TYPOGRAPHY */
:root {
  // --hero-tagline: clamp(base-step(1.6), 2vw, base-step(2.2));
  --hero-category: var(--step-1);
  --hero-summary: clamp(base-step(1), 1.3vw, base-step(1.2));
  --hero-badge: clamp(base-step(2.4), 5vw, base-step(3.1));
}
.member-directory {
  --member-border: rgb(var(--color-surface-inverse-rgb) / 0.1);
  --member-bg: var(--color-surface-base);
  --member-ink: var(--color-surface-inverse);
  --member-muted: var(--color-member-muted);
  --member-chip-bg: var(--color-brand-primary);
  --member-chip-ink: var(--color-ink-on-dark);
  --member-primary: var(--color-member-primary);
  --filter-bg: var(--color-surface-base);
  --filter-border: rgb(var(--color-surface-inverse-rgb) / 0.12);
  --filter-ink: var(--color-brand-deep);
  --filter-pill-bg: rgb(var(--color-member-filter-base-rgb) / 0.08);
  --filter-pill-border: rgb(var(--color-member-filter-base-rgb) / 0.16);
  --filter-pill-hover: rgb(var(--color-member-filter-base-rgb) / 0.16);
  --filter-pill-active: var(--color-brand-accent);

  // max-width: map.get($containerWidths, "directory-max");
  // margin: 0 auto;
  // padding: clamp(var(--space-xl), 6vw, var(--space-section));
  padding-top: var(--layout-pad-block); 
  display: grid;
  gap: clamp(var(--space-xl), 5vw, var(--space-2xl));
}

.member-directory__intro {
  display: grid;
  gap: clamp(var(--space-md-plus), 4vw, var(--space-lg));

  @media (min-width: breakpoint("md")) {
    grid-template-columns: minmax(0, 2.5fr) minmax(0, 1fr);
    align-items: stretch;
  }
}

.member-directory__card {
  background: var(--member-bg);
  border: 1px solid var(--member-border);
  border-radius: var(--radius-md);
  padding: var(--space-lg-plus);
  color: var(--member-muted);
  line-height: 1.75;

  p {
    margin: 0 0 var(--space-md-plus);

    &:last-child {
      margin-bottom: 0;
    }
  }
}

.member-directory__stat {
  background: var(--color-member-stat-surface);
  border: 1px solid rgb(var(--color-surface-inverse-rgb) / 0.08);
  border-radius: var(--radius-md);
  padding: var(--space-xl);
  display: grid;
  align-content: center;
  justify-items: center;
  gap: var(--space-mini);
  text-align: center;

  span {
    display: block;
  }

  .member-directory__stat-value {
    font-size: clamp(calc(2 * var(--base-10)), 5vw, calc(2.8 * var(--base-10)));
    font-weight: 700;
    color: var(--member-ink);
    line-height: 1;
  }

  .member-directory__stat-label {
    font-size: var(--font-caption);
    text-transform: uppercase;
    letter-spacing: 0.12em;
    color: var(--member-muted);
  }
}

.member-directory__filters {
  display: grid;
  gap: clamp(var(--space-md-plus), 4vw, var(--space-lg-plus));
}

.member-directory__filters-header {

  p {
    color: var(--member-muted);
    font-size: var(--step--1);
   }
}

.member-filters {
  display: grid;
  gap: var(--space-md-plus);
  padding: clamp(var(--space-md-plus), 4vw, var(--space-xl));
  border: 1px solid var(--filter-border);
  border-radius: var(--radius-md);
  background: var(--filter-bg);
}

.filter-selects {
  display: grid;
  gap: var(--space-sm);
}

.filter-select {
  display: grid;
  gap: clamp(base-step(0.25), 0.6vw, base-step(0.4));
}

.filter-select__label {
  font-size: var(--step--1);
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 0.12em;
  color: rgb(var(--color-member-filter-label-rgb) / 0.68);
}

.filter-select__control {
  width: 100%;
  font-size: var(--step-0);
  color: var(--filter-ink);
  border-radius: var(--radius-lg);
  border: 1px solid var(--filter-pill-border);
  background: var(--color-surface-base);
  padding: clamp(base-step(0.8), 1.6vw, base-step(1.1))
    clamp(base-step(1.1), 2.4vw, base-step(1.6));
  transition: border-color 160ms ease, box-shadow 160ms ease;

  &:focus-visible {
    outline: none;
    border-color: rgb(var(--color-brand-primary-rgb) / 0.4);
    box-shadow: 0 0 0 3px rgb(var(--color-brand-primary-rgb) / 0.18);
  }
}

.filter-select__control[multiple] {
  min-height: clamp(base-step(6), 24vw, base-step(9));
  padding: clamp(base-step(0.5), 1vw, base-step(0.8))
    clamp(base-step(1), 2vw, base-step(1.5));
}

.filter-toggle {
  display: none;
}

.filter-rows {
  display: none;
  gap: clamp(var(--space-md), 3vw, var(--space-lg));
}

.filter-group {
  display: grid;
  gap: var(--space-xs);
  align-items: start;

  @media (min-width: breakpoint("sm")) {
    grid-template-columns: minmax(max-content, 140px) minmax(0, 1fr);
    gap: var(--space-sm);
  }
}

.filter-label {
  font-size: var(--step--1);
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 0.14em;
  color: rgb(var(--color-member-filter-label-rgb) / 0.75);
  line-height: 46px; //match button height
}

.filter-options {
  display: flex;
  flex-wrap: wrap;
  gap: var(--space-xs);
  align-items: center;
}

.filter-btn {
  appearance: none;
  border: 1px solid var(--filter-pill-border);
  background: var(--filter-pill-bg);
  color: var(--filter-ink);
  border-radius: var(--radius-lg);
  padding: clamp(base-step(0.7), 1.2vw, base-step(1))
    clamp(base-step(1.1), 2vw, base-step(1.6));
  font-size: var(--step-0);
  font-weight: 600;
  cursor: pointer;
  transition: background 160ms ease;

  &:hover,
  &:focus-visible {
    background: var(--filter-pill-hover);
  }

  &.is-active,
  &[aria-pressed="true"] {
    background: var(--filter-pill-active);
    color: var(--color-ink-on-dark);
  }
}

.member-directory__list {
  display: grid;
  gap: var(--space-lg-plus);
}

.filter-empty {
  margin: 0;
  padding: clamp(var(--space-sm), 3vw, var(--space-md-plus));
  border: 1px solid rgb(var(--color-brand-deep-rgb) / 0.12);
  border-radius: var(--radius-lg);
  background: rgb(var(--color-member-empty-bg-rgb) / 0.85);
  color: var(--color-member-highlight);
  font-size: var(--step--1);
  font-weight: 600;
}

@media (max-width: breakpoint("sm")) {
  .filter-rows {
    display: none;
  }

  .filter-group {
    grid-template-columns: minmax(0, 1fr);
  }

  .filter-options {
    gap: var(--space-sm);
  }

  body.has-active-filters {
    .members-grid .member:not(.is-match) {
      display: none;
    }

    .members-grid .member.is-match {
      display: block;
    }
  }
}

@media (min-width: breakpoint("sm") + 1px) {
  .filter-selects {
    display: none;
  }

  .filter-rows {
    display: grid;
  }
}

.members-grid {
  display: grid;
  grid-template-columns: repeat(1, minmax(0, 1fr));
  gap: var(--space-lg);
  list-style: none;
  margin: 0;
  padding: 0;

  @media (min-width: breakpoint("sm")) {
    grid-template-columns: repeat(2, minmax(0, 1fr));
  }

  @media (min-width: breakpoint("md")) {
    grid-template-columns: repeat(3, minmax(0, 1fr));
  }

  @media (min-width: breakpoint("xl")) {
    grid-template-columns: repeat(4, minmax(0, 1fr));
  }
}

.member-directory__honorary {
  display: grid;
  gap: clamp(var(--space-lg), 4vw, var(--space-xl));
}

.honorary-members__heading {
  margin: 0;
  font-size: var(--step-2);
  font-weight: 700;
  color: var(--member-ink);
}

.honorary-members {
  display: grid;
  grid-template-columns: repeat(1, minmax(0, 1fr));
  gap: var(--space-lg);
  list-style: none;
  margin: 0;
  padding: 0;

  @media (min-width: breakpoint("sm")) {
    grid-template-columns: repeat(2, minmax(0, 1fr));
  }
}

.honorary-member {
  margin: 0;
}

.honorary-card {
  display: flex;
  align-items: stretch;
  border: 1px solid var(--member-border);
  border-radius: var(--radius-lg);
  background: var(--member-bg);
  overflow: hidden;
  color: var(--member-ink);
}

.honorary-card__media {
  flex: 0 0 25%;
  max-width: 25%;
  background: var(--member-chip-bg);
  display: flex;
  align-items: stretch;
  justify-content: center;

  img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    display: block;
  }
}

.honorary-card__media--placeholder {
  background: linear-gradient(135deg, var(--color-member-hero-start), var(--color-member-hero-stop));

  img {
    width: 70%;
    height: 70%;
    object-fit: contain;
  }
}

.honorary-card__body {
  flex: 1;
  display: flex;
  align-items: center;
  padding: clamp(base-step(1.4), 2.4vw, base-step(2.2))
    clamp(base-step(1.6), 3vw, base-step(2.6));
}

.honorary-card__name {
  margin: 0;
  font-size: var(--step-2);
  font-weight: 700;
  color: var(--member-ink);
  line-height: 1.2;
}

.member-card {
  display: flex;
  flex-direction: row;
  align-items: stretch;
  height: 100%;
  border: 1px solid var(--member-border);
  border-radius: var(--radius-lg);
  background: var(--member-bg);
  text-decoration: none;
  color: inherit;
  box-shadow: none;
  transition: border-color 160ms ease, background 160ms ease;
  overflow: hidden;
  text-align: left;

  &:hover,
  &:focus-visible {
    border-color: rgb(var(--color-brand-primary-rgb) / 0.4);
  }
}

.member-media {
  position: relative;
  overflow: hidden;
  background: var(--member-chip-bg);
  flex: 0 0 25%;
  max-width: 25%;
  display: flex;
  align-items: stretch;
  justify-content: center;

  img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    display: block;
    transition: transform 200ms ease;
  }

  .member-card:hover & img,
  .member-card:focus-visible & img {
    transform: scale(1.04);
  }

  &::after {
    content: "";
    position: absolute;
    inset: auto 0 0 0;
    height: 28%;
    background: linear-gradient(0deg, rgb(var(--color-member-overlay-rgb) / 0.55), transparent);
    pointer-events: none;
  }
}

.member-media--placeholder {
  background: linear-gradient(135deg, var(--color-member-hero-start), var(--color-member-hero-stop));

  img {
    object-fit: contain;
    padding: clamp(1.4rem, 3.6vw, 2.2rem);
  }
}

.member-body {
  flex: 1;
  padding: clamp(base-step(1.4), 2.4vw, base-step(2.2))
    clamp(base-step(1.6), 3vw, base-step(2.6))
    clamp(base-step(1.8), 3.2vw, base-step(2.8));
  display: grid;
  gap: clamp(base-step(0.6), 1.1vw, base-step(1));
  align-content: center;
  justify-items: start;
  color: var(--member-ink);
}

.member-header {
  display: grid;
  gap: clamp(base-step(0.3), 0.6vw, base-step(0.5));
}

.member-name {
  margin: 0;
  color: var(--member-ink);
  font-weight: 700;
  line-height: 1.2;
  font-size: var(--step-2);
}

.member-badge {
  position: absolute;
  left: clamp(base-step(0.9), 2.5vw, base-step(1.2));
  bottom: clamp(base-step(0.9), 2.5vw, base-step(1.2));
  background: var(--member-chip-bg);
  color: var(--member-chip-ink);
  border-radius: var(--radius-max);
  padding: clamp(base-step(0.4), 1.6vw, base-step(0.6))
    clamp(base-step(0.8), 2.3vw, base-step(1));
  font-size: var(--step--1);
  font-weight: 700;
  letter-spacing: 0.14em;
  text-transform: uppercase;
  pointer-events: none;
  z-index: 2;
}

.member-facts {
  margin: 0;
  display: grid;
  gap: clamp(base-step(0.35), 0.8vw, base-step(0.6));
  justify-items: start;
}

.member-facts dt {
  margin: 0;
  font-size: var(--step--1);
  text-transform: uppercase;
  letter-spacing: 0.14em;
  color: rgb(var(--color-member-filter-label-rgb) / 0.72);
}

.member-facts dd {
  margin: 0;
  font-size: var(--step-1);
  font-weight: 600;
  color: var(--member-ink);
  line-height: 1.45;
}

body.has-active-filters {
  .member-card {
    opacity: 0.35;
    filter: grayscale(0.55);
  }

  .member.is-match .member-card {
    opacity: 1;
    filter: none;
    border-color: rgb(var(--color-brand-primary-rgb) / 0.45);
  }
}

@media (min-width: breakpoint("sm")) {
  .member-card {
    flex-direction: column;
  }

  .member-media {
    flex: 0 0 auto;
    max-width: none;
    aspect-ratio: 1 / 1;
    display: block;
  }

  .member-media img {
    height: 100%;
  }

  .member-body {
    align-content: start;
    justify-items: stretch;
  }

  .member-facts {
    justify-items: stretch;
  }
}

.member-directory__footer {
  margin-top: var(--space-2xl);
  color: var(--member-muted);
  font-size: var(--font-caption);
  line-height: 1.7;

  a {
    color: var(--member-primary);

    &:hover,
    &:focus-visible {
      color: var(--color-member-link);
    }
  }
}

// MEMBER PAGE

.member-hero {
  display: grid;
  grid-template-columns: minmax(0, 1fr) clamp(260px, 24vw, 340px);
  align-items: end;
  gap: clamp(3rem, 5vw, 4.2rem);
}

.member-hero--solo {
  grid-template-columns: minmax(0, 1fr);
  align-items: center;
  gap: clamp(2.4rem, 4vw, 3.2rem);
  max-width: clamp(62rem, 80vw, 1100px);
  margin-inline: auto;
}

.member-hero__portrait {
  width: clamp(20rem, 28vw, 32rem);
  aspect-ratio: 1 / 1;
  border-radius: var(--radius-max);
  overflow: hidden;
  border: 8px solid var(--color-ink-on-dark);
  background: linear-gradient(135deg, var(--color-member-hero-start), var(--color-member-hero-stop));
  display: flex;
  align-items: center;
  justify-content: center;
  transform: translateY(12%);
  margin: clamp(1.2rem, 3vw, 2.8rem) clamp(1.2rem, 3vw, 3.6rem)
    clamp(-3rem, -4.5vw, -3.4rem) 0;
  justify-self: end;
  z-index: 2;
}

.member-hero__portrait img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.member-hero__portrait--fallback {
  background: var(--color-surface-hero);
}

.member-hero__text {
  display: grid;
  gap: 0.6rem;
  color: var(--color-ink-on-dark);
  text-align: left;
}

.member-hero__name {
  margin: 0;
  font-size: var(--step-5); /* match homepage banner title */
  line-height: 1.05;
  font-weight: 700;
  color: var(--color-ink-on-dark);
}

.member-hero__category {
  margin: 0;
  font-size: var(--hero-category);
  font-weight: 600;
  letter-spacing: 0.08em;
  text-transform: uppercase;
  color: rgb(var(--color-surface-base-rgb) / 0.78);
  padding-left: 0.15em;
}

.member-hero__summary {
  margin: 0;
  font-size: var(--hero-summary);
  color: rgb(var(--color-surface-base-rgb) / 0.78);
  max-width: 48ch;

  .member-hero--solo & {
    max-width: 52ch;
    color: rgb(var(--color-surface-base-rgb) / 0.85);
  }
}

.member-hero--solo .member-hero__text {
  align-items: flex-start;
}


.member-profile__body {
  margin: 0 auto clamp(4.4rem, 6.4vw, 5.6rem);
  display: grid;
  grid-template-columns: 1fr;
  gap: clamp(2.6rem, 4.5vw, 4rem);
  width: calc(100% - var(--inline-padding) * 2);
  max-width: 120rem;
  box-sizing: border-box;
}

.member-profile__body--with-facts {
  grid-template-columns: minmax(0, 1fr) clamp(260px, 24vw, 340px);
}

.member-profile__column {
  position: relative;
}

.member-profile__column--facts {
  padding-left: clamp(2.4rem, 4.8vw, 3.8rem);
  border-left: 1px solid rgb(var(--color-surface-hero-accent-rgb) / 0.12);
  font-size: var(--font-ui);
  align-self: start;
}

.member-profile__facts {
  margin: 0;
  display: grid;
  gap: clamp(1.6rem, 3vw, 2rem);
  grid-template-columns: minmax(0, 1fr);
}

.member-profile__fact {
  display: grid;
  gap: 0.45rem;
}

.member-profile__fact dt {
  font-size: var(--step--1);
  letter-spacing: 0.09em;
  text-transform: uppercase;
  color: var(--color-member-meta);
  margin: 0;
}

.member-profile__fact dd {
  margin: 0 0 var(--space-sm) 0;
  font-size: var(--font-ui);
  font-weight: 600;
  color: var(--color-member-heading);
  line-height: 1;
}

.member-profile__column--content {
  padding-right: clamp(2.4rem, 4.8vw, 3.8rem);
  display: grid;
  gap: clamp(3.4rem, 4.6vw, 3.6rem);
  font-size: var(--step-0); /* align with main body size */
  line-height: 1.6;
  max-width: 68ch;
}

.member-profile__section {
  display: grid;
  gap: 0.75rem;
}

.member-profile__section--bio > *:first-child {
  margin-top: 0;
}

.member-profile__section--certifications ul {
  margin: 0;
  list-style-position: outside;
}

.member-profile__section--certifications ul li::marker {
  color: var(--color-surface-hero);
}

.member-profile__section--certifications p {
  margin: 0 0 0.85rem;
}

.member-profile__section--documents .media-document {
  margin: 0;
}

.member-profile__footer {
  max-width: clamp(62rem, 78vw, 1100px);
  margin: 0 auto clamp(3rem, 5vw, 4rem);
  padding-inline: clamp(1.5rem, 5vw, 3.5rem);
  color: var(--color-member-body);
  font-size: var(--base-10);
}

@media (max-width: breakpoint("md")) {
  .member-hero {
    grid-template-columns: minmax(0, 1fr) clamp(140px, 38vw, 200px);
    align-items: center;
    gap: clamp(1.6rem, 4.6vw, 2.6rem);
  }
  .member-hero--solo {
    grid-template-columns: minmax(0, 1fr);
    gap: clamp(1.8rem, 5vw, 2.4rem);
    justify-items: start;
  }

  .member-hero__text {
    text-align: left;
    align-items: flex-start;
  }

  .member-profile__body {
    grid-template-columns: 1fr;
    margin-top: clamp(-2.2rem, -6vw, -3rem);
  }

  .member-profile__body--with-facts {
  }

  .member-profile__column--facts {
    border-left: 0;
    padding-left: 0;
    padding-bottom: clamp(2rem, 4vw, 3rem);
    border-bottom: 1px solid rgb(var(--color-surface-hero-accent-rgb) / 0.12);
  }

  .member-profile__column--content {
    padding-right: 0;
    padding-top: clamp(2rem, 4vw, 3rem);
    max-width: none;
  }

  .member-profile__facts {
    grid-template-columns: repeat(2, minmax(0, 1fr));
    text-align: left;
  }

  .member-hero__portrait {
    width: clamp(14rem, 30vw, 18rem);
    margin: clamp(0.8rem, 2.2vw, 1.6rem) clamp(0.8rem, 2.2vw, 1.8rem)
      clamp(-2.2rem, -3vw, -2.6rem) 0;
    transform: translateY(6%);
  }
}

@media (min-width: breakpoint("md")) {
  .member-profile__column--facts {
    grid-column: 2;
    grid-row: 1;
  }

  .member-profile__column--content {
    grid-column: 1;
    grid-row: 1;
  }
}
