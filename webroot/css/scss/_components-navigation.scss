@use "theme" as *;

// 20px -> 30px
$nav-item-gap: clamp(1.25rem, 3vw, 1.875rem);
// 16px
$nav-link-pad-y: 1rem;
// 9px -> 11px
$subnav-link-pad-y: clamp(0.5625rem, 2vw, 0.6875rem);
// 16px -> 24px
$subnav-link-pad-x: clamp(1rem, 4vw, 1.5rem);
// 280px
$subnav-max-width: 17.5rem;
// 4px
$subnav-row-gap: 0.25rem;
// 2px
$subnav-focus-outline: 2px;
// 10px
$subnav-arrow-size: 0.625rem;
// -- NAV (GENERAL) START --
@layer blocks {
nav {
  ul {
    list-style-type: none;
    margin: 0;
    display: flex;
    gap: $nav-item-gap;
  }

  a {
    font-family: var(--font-sans);
    color: var(--color-ink-primary);
    display: flex;
    justify-content: center;
    align-items: center;
    text-decoration: none;
    font-size: var(--step-1);
    padding: $nav-link-pad-y 0;
    letter-spacing: 0.025em; /* 25/1000 */
  }

  
  a:visited {
    color: var(--color-ink-primary);
  }
  a:hover,
  a:focus {
    color: var(--color-brand-primary);
  }
}
// -- NAV (GENERAL) END --
// NAVIGATION ****************************************************************


.subnav {
  &--select {
    margin-bottom: var(--space-md);
  }

  &--list {
    display: none;

    ul {
      list-style: none;
      margin: 0;
      padding: 0;
      display: grid;
      gap: var(--space-sm);
    }

    li {
      margin: 0;
    }

    a {
      display: block;
      padding: $subnav-link-pad-y $subnav-link-pad-x;
      border-radius: var(--radius-md);
      background: rgb(var(--color-brand-primary-rgb) / 0.06);
      color: inherit;
      text-decoration: none;
      transition: background 150ms ease, color 150ms ease;
    }

    a:hover,
    a:focus {
      background: rgb(var(--color-brand-primary-rgb) / 0.12);
    }

    a[aria-current="page"] {
      background: rgb(var(--color-brand-primary-rgb) / 0.18);
      font-weight: 600;
    }
  }
}

@media (min-width: breakpoint("md")) {
  .subnav {
    &--select {
      display: none;
    }

    &--list {
      display: block;
      position: static;
      font-family: var(--font-sans);
      color: var(--color-ink-primary);
      max-width: $subnav-max-width;

      ul {
        list-style: none;
        margin: 0;
        padding: 0;
        display: grid;
        row-gap: $subnav-row-gap;
      }

      li {
        margin: 0;

        &:not(.first) + li a {
          border-top: 1px solid rgb(var(--color-ink-absolute-rgb) / 0.06);
        }
      }

      a {
        display: block;
        text-decoration: none;
        // padding: 0.375rem 0.625rem;
        border-radius: var(--radius-sm);
        line-height: 1.35;
        font-size: var(--step--1);
        color: var(--color-ink-muted);
        background: transparent;
        transition: background 120ms ease, color 120ms ease;
      }

      a:hover {
        background: var(--color-surface-soft);
      }

      a:focus {
        background: transparent;
      }

      a:focus-visible {
        outline: $subnav-focus-outline solid var(--color-focus-ring);
        outline-offset: $subnav-focus-outline;
      }

      .current > a,
      a[aria-current="page"] {
        background: var(--color-brand-primary);
        color: var(--color-ink-on-dark);
        font-weight: 600;
      }

      // .first > a {
      //   font-family: $fontSerif;
      //   font-size: var(--step-2);
      //   font-weight: 700;
      //   color: var(--color-brand-primary);
      //   background: var(--color-surface-muted);
      //   border: 1px solid var(--color-border-muted);
      //   padding: 0.5rem 0.75rem;
      // }

    &.jumpnav  .current > a {
        position: relative;
        &::before {  // arrow pointer left
          content: "";
          position: absolute;
          left: calc(-0.95 * #{$subnav-arrow-size});
          top: 50%;
          transform: translateY(-50%);
          width: 0;
          height: 0;
          border-style: solid;
          border-width: calc(1 * #{$subnav-arrow-size}) calc(1 * #{$subnav-arrow-size}) calc(1 * #{$subnav-arrow-size}) 0;
          border-color: transparent var(--color-brand-primary) transparent  transparent;
        }

      }

      // a:visited:not([aria-current]) {
      //   color: var(--color-brand-primary-visited);
      // }
    }
  }
}

}
