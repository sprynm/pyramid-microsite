@use "sass:map";
@use "theme" as *;
@use "base-utils" as *;

$layout-gap-default: clamp(1.5rem, 4vw, 2.25rem);
$layout-pad-default: clamp(2rem, 5vw, 3rem);
$subnav-width-default: clamp(12.5rem, 25vw, 200rem);

.site-wrapper {
  background: var(
    --wrapper-bg-default,
    var(--color-surface-base) var(--bg-tile) repeat 0 0
  );
  min-height: 50vh;
}
.site-wrapper--default {
  background: var(
    --wrapper-bg-default,
    var(--color-surface-base) var(--bg-tile) repeat 0 0
  );
}
.site-wrapper--platter {
  background: var(--wrapper-bg-platter, var(--platter-bg));
}
.site-wrapper--surface {
  background: var(--wrapper-bg-surface, var(--color-surface-base));
  background: var(--wrapper-bg-surface, var(--color-surface-base));
}
.site-wrapper--dark {
  background: var(--wrapper-bg-dark, var(--color-surface-inverse));
  color: var(--wrapper-color-dark, var(--color-ink-inverse));
  background: var(--wrapper-bg-dark, var(--color-surface-inverse));
  color: var(--wrapper-color-dark, var(--color-ink-inverse));
}

#content {
  scroll-margin-top: var(--nav-offset, 0px);
}

.c-container {
  --container-inner: var(--container-normal-inner);
  width: 100%;
  max-width: calc(var(--container-inner) + var(--container-gutter) * 2);
  margin-inline: auto;
  padding-inline: var(--container-gutter);
  box-sizing: border-box;
}
.c-container--narrow {
  --container-inner: var(--container-narrow-inner);
}
.c-container--full {
  --container-inner: var(--container-full-inner);
}

.l-single {
  display: flex;
  flex-direction: column;
  gap: var(--layout-gap, #{$layout-gap-default});
  padding-block: var(--space-hero, #{$layout-pad-default});
}
.l-with-subnav {
  display: grid;
  grid-template-columns: minmax(0, 1fr) var(
      --layout-subnav-width,
      #{$subnav-width-default}
    );
  gap: var(--layout-gap, #{$layout-gap-default});
  padding-block: var(--space-hero, #{$layout-pad-default});
  align-items: start;
}
.l-with-subnav > main {
  min-width: 0;
}
.l-with-subnav > .subnav--list {
  &.subnav--sticky {
    position: sticky;
    top: calc(var(--nav-offset, 0px) + 1rem);
  }
  align-self: start;
}

@media (max-width: breakpoint("md")) {
  .l-with-subnav {
    grid-template-columns: 1fr;
  }
  .l-with-subnav > .subnav--list {
    position: static;
    order: -1;
  }
}

.visually-hidden {
  position: absolute !important;
  width: 1px !important;
  height: 1px !important;
  padding: 0 !important;
  margin: -1px !important;
  overflow: hidden !important;
  clip: rect(0, 0, 0, 0) !important;
  white-space: nowrap !important;
  border: 0 !important;
}

.c-select {
  appearance: none;
  appearance: base-select;
  -webkit-appearance: none;
  -moz-appearance: none;
  width: 100%;
  font: inherit;
  color: inherit;
  background-color: var(--color-surface-base);
  border: 1px solid rgb(var(--color-brand-primary-rgb) / 0.25);
  border-radius: var(--radius-md);
  padding: clamp(0.5625rem, 2.8vw, 0.6875rem) clamp(2rem, 6vw, 2.5rem)
    clamp(0.5625rem, 2.8vw, 0.6875rem) clamp(0.875rem, 4vw, 1.5rem);
  box-shadow: 0 0.25rem 0.75rem rgb(var(--color-surface-inverse-rgb) / 0.08);
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='8' viewBox='0 0 12 8'%3E%3Cpath fill='currentColor' d='M6 8 0 0h12z'/%3E%3C/svg%3E");
  background-repeat: no-repeat;
  background-position: right clamp(0.75rem, 3vw, 1.125rem) center;
  background-size: clamp(0.625rem, 2.5vw, 0.875rem);
  transition: border-color 150ms ease, box-shadow 150ms ease;
}
.c-select:focus {
  outline: none;
  border-color: rgb(var(--color-brand-primary-rgb) / 0.6);
  box-shadow: 0 0 0 0.1875rem rgb(var(--color-brand-primary-rgb) / 0.2);
}

/* Spacing utilities */
$stack-sizes: (
  sm: var(--space-sm),
  md: var(--space-md),
  lg: var(--space-lg),
  xl: var(--space-xl),
);
@each $name, $size in $stack-sizes {
  .u-stack-#{$name} > * + * {
    margin-top: $size;
  }
}

$pad-block-sizes: (
  sm: var(--space-sm),
  md: var(--space-md),
  lg: var(--space-lg),
  xl: var(--space-xl),
  section: var(--space-section),
);
@each $name, $size in $pad-block-sizes {
  .u-pad-block-#{$name} {
    padding-block: $size;
  }
}

.u-pad-top-lg {
  padding-top: var(--space-lg);
}
.u-pad-bottom-lg {
  padding-bottom: var(--space-lg);
}
